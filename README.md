# 2åŸºäºè·³è¡¨ç»“æ„çš„KVå­˜å‚¨å¼•æ“è®¾è®¡

éå…³ç³»å‹æ•°æ®åº“redisï¼Œä»¥åŠlevedbï¼Œrockdbå…¶æ ¸å¿ƒå­˜å‚¨å¼•æ“çš„æ•°æ®ç»“æ„å°±æ˜¯è·³è¡¨ã€‚

æœ¬é¡¹ç›®å°±æ˜¯åŸºäºè·³è¡¨å®ç°çš„è½»é‡çº§é”®å€¼å‹å­˜å‚¨å¼•æ“ï¼Œä½¿ç”¨C++å®ç°ã€‚æ’å…¥æ•°æ®ã€åˆ é™¤æ•°æ®ã€æŸ¥è¯¢æ•°æ®ã€æ•°æ®å±•ç¤ºã€æ•°æ®è½ç›˜ã€æ–‡ä»¶åŠ è½½æ•°æ®ï¼Œä»¥åŠæ•°æ®åº“å¤§å°æ˜¾ç¤ºã€‚

åœ¨éšæœºå†™è¯»æƒ…å†µä¸‹ï¼Œè¯¥é¡¹ç›®æ¯ç§’å¯å¤„ç†å•Šè¯·æ±‚æ•°ï¼ˆQPSï¼‰: 24.39wï¼Œæ¯ç§’å¯å¤„ç†è¯»è¯·æ±‚æ•°ï¼ˆQPSï¼‰: 18.41w

# ä»€ä¹ˆæ˜¯è·³è¡¨

> è¿™é‡Œä¸åšä»‹ç»ï¼Œè¯¦è§:
>
> - [æ¼«ç”»ï¼šä»€ä¹ˆæ˜¯ â€œè·³è¡¨â€ ï¼Ÿ - çŸ¥ä¹ (zhihu.com)](https://zhuanlan.zhihu.com/p/200815425)
> - [æ‹œæ‰˜ï¼Œé¢è¯•åˆ«å†é—®æˆ‘è·³è¡¨äº†ï¼ - å½¤å“¥è¯»æºç  - åšå®¢å›­ (cnblogs.com)](https://www.cnblogs.com/tong-yuan/p/skiplist.html)

# é¡¹ç›®ä¸­æ–‡ä»¶

- main.cpp åŒ…å«skiplist.hä½¿ç”¨è·³è¡¨è¿›è¡Œæ•°æ®æ“ä½œ
- skiplist.h è·³è¡¨æ ¸å¿ƒå®ç°
- bin ç”Ÿæˆå¯æ‰§è¡Œæ–‡ä»¶ç›®å½•
- makefile ç¼–è¯‘è„šæœ¬
- store æ•°æ®è½ç›˜çš„æ–‡ä»¶å­˜æ”¾åœ¨è¿™ä¸ªæ–‡ä»¶å¤¹
- stress_test_start.sh å‹åŠ›æµ‹è¯•è„šæœ¬

# å¯¹å¤–æ¥å£

- insert_element(int,string) // æ’å…¥è®°å½•
- srase_element(int) // åˆ é™¤è®°å½•
- search_element(int) // æŸ¥è¯¢è®°å½•
- displayList(int) // æ˜¾ç¤ºç»“æ„
- dumpFile(string) // å¯¼å‡ºæ•°æ®
- loadFile(string) // åŠ è½½æ•°æ®
- size() // è·å–æ•°æ®è§„æ¨¡

# å­˜å‚¨å¼•æ“æ•°æ®è¡¨ç°

## æ’å…¥æ“ä½œ

è·³è¡¨æ ‘é«˜ï¼š20

é‡‡ç”¨éšæœºæ’å…¥æ•°æ®æµ‹è¯•ï¼š

| æ’å…¥æ•°æ®è§„æ¨¡ï¼ˆä¸‡æ¡ï¼‰ | è€—æ—¶ï¼ˆç§’ï¼‰ |
| -------------------- | ---------- |
| 10                   | 2.64536    |
| 30                   | 8.56653    |
| 50                   | 17.0683    |

æ¯ç§’å¯å¤„ç†å†™è¯·æ±‚æ•°ï¼ˆQPSï¼‰: 3.4w

## å–æ•°æ®æ“ä½œ

| å–æ•°æ®è§„æ¨¡ï¼ˆä¸‡æ¡ï¼‰ | è€—æ—¶ï¼ˆç§’ï¼‰ |
| ------------------ | ---------- |
| 10                 | 4.57455    |
| 30                 | 16.98      |
| 50                 | 30.8792    |

æ¯ç§’å¯å¤„ç†è¯»è¯·æ±‚æ•°ï¼ˆQPSï¼‰: 1.9w

# é¡¹ç›®è¿è¡Œæ–¹å¼

```
make            // complie demo main.cpp
./bin/main      // run 
```

å¦‚æœæƒ³è‡ªå·±å†™ç¨‹åºä½¿ç”¨è¿™ä¸ªkvå­˜å‚¨å¼•æ“ï¼Œåªéœ€è¦åœ¨ä½ çš„CPPæ–‡ä»¶ä¸­include skiplist.h å°±å¯ä»¥äº†ã€‚

å¯ä»¥è¿è¡Œå¦‚ä¸‹è„šæœ¬æµ‹è¯•kvå­˜å‚¨å¼•æ“çš„æ€§èƒ½ï¼ˆå½“ç„¶ä½ å¯ä»¥æ ¹æ®è‡ªå·±çš„éœ€æ±‚è¿›è¡Œä¿®æ”¹ï¼‰

```
sh stress_test_start.sh 
```

ç›¸å…³å‚è€ƒï¼š

[ã€æ•°æ®ç»“æ„ã€‘è·³è¡¨SkipListä»£ç è§£æ(C++) - åŠç”Ÿç“œã®blog (banshengua.top)](https://banshengua.top/[æ•°æ®ç»“æ„]è·³è¡¨skiplistä»£ç è§£æc/)

[youngyangyang04/Skiplist-CPP: A tiny KV storage based on skiplist written in C++ language| ä½¿ç”¨C++å¼€å‘ï¼ŒåŸºäºè·³è¡¨å®ç°çš„è½»é‡çº§é”®å€¼æ•°æ®åº“ğŸ”¥ğŸ”¥ ğŸš€ (github.com)](https://github.com/youngyangyang04/Skiplist-CPP)
